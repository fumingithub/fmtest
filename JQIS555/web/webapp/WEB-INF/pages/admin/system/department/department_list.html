<#include "../../../common/_public.html"/>
<#include "../../../common/_treegrid_async.html"/>
<div class="bjui-pageHeader">
	<form id="pagerForm" data-toggle="ajaxsearch"
		action="${ctx}/admin/system/department.do">
		<div class="office">
			<ul class="offbtn">
				<li> <a data-toggle="dialog" data-width="450" data-height="400"  data-mask="true" data-isrefshpar="true" data-id="department_add" data-url="${ctx}/admin/system/department!edit.do" data-external="false" data-title="部门新增" data-isrefsh="true"><span class="iconbg01">
					<i class="fa fa-file-text-o font24"></i></span>新增</a> </li>
				<li> <a data-toggle="dialog" data-width="450" data-height="400"  data-mask="true" data-isrefshpar="true" data-id="department_add"  data-url="${ctx}/admin/system/department!edit.do?parentIns.id={#bjui-selected}" data-external="false" data-title="部门添加下级" data-isrefsh="true">
					<span class="iconbg04"><i class="fa fa-plus-square font24"></i></span>添加下级部门</a>
				</li>
				<li><a data-toggle="dialog" data-width="450" data-height="400"  data-mask="true" data-isrefshpar="true" data-id="department_add" data-url="${ctx}/admin/system/department!edit.do?id={#bjui-selected}" data-title="部门编辑" data-external="false" data-isrefsh="true"><span class="iconbg02">
					<i class="fa fa-edit  font24"></i></span>编辑</a></li>
				<li><a
					onClick="deleteUnit('${ctx}/admin/system/department!deleteunit.do?id=',this)"><span class="iconbg03">
					<i class="fa fa-trash font24"></i></span>禁用</a>
				</li>
				<li><span class="ttt"></span>
				</li>
				<li><a id="refresh" data-toggle="reloadsearch"
					data-target="#bjui-pageContent" data-icon="search"><span class="iconbg02">
					<i class="fa fa-refresh font24"></i></span>刷新</a>
				</li>
				<li> <a  class="closecutab"><span class="iconbg03">
				<i class="fa fa-remove  font24"></i></span>关闭</a> </li> 
			</ul>
		</div>
		<div class="bjui-searchBar">
            <input type="hidden" name="limit" value="${limit}">
            <input type="hidden" name="start" value="${start}">
			<input name="areaId" id="inslist_area_tree_areaId" type="hidden" value="${filter.parameters.areaId!}"/>

            <lable>部门名称</lable>
            <input name="name" class="form-control" size="15" type="text" value="${filter.parameters.name!}" />
            <lable>部门编码</lable>
            <input name="code" class="form-control" size="15" type="text" value="${filter.parameters.code!}" />
            <button type="submit" class="btn-default"  data-toggle="ajaxsearch" data-icon="search">查询</button>&nbsp;
            <a class="btn btn-orange" href="javascript:;" onclick="$(this).navtab('reloadForm', true);" data-icon="undo">清空</a>

        </div>
	</form>
</div>
<div class="bjui-pageContent">

    <table data-width="100%" data-toggle="tablefixed" data-nowrap="true" data-selected-multi="false"
    	class="table table-bordered table-hover table-striped table-top min-width">
        <thead>
        <tr>
            <th></th>
            <th style="text-align:center" title="部门名称">部门名称</th>
            <th style="text-align:center" title="部门编码">部门编码</th>
            <th style="text-align:center" title="电话号码">电话号码</th>
            <th style="text-align:center" title="电子邮箱">电子邮箱</th>
            <th style="text-align:center" title="状态">状态</th>
        </tr>
        </thead>
        <tbody id="insTbody">
        <#list entitys as entity>
         <#if haveCondition??>
             <td><input type="checkbox" name="ids" data-toggle="icheck" value="${entity.id}"></td>
             <td class="left" title="${entity.name!}">${entity.name!}</td>
	     <#else>
        <#if entity.parentId??>
            <tr class="treegrid-${entity.id} treegrid-parent-${entity.parentId}">
        <#else>
            <tr class="treegrid-${entity.id} treegrid-collapsed">
        </#if>
            <td>
            <input type="checkbox" name="ids" data-toggle="icheck" value="${entity.id}">
            </td>
	            <td class="left" title='${entity.name!}'>
	            	<#if (entity.isHaveChild>0)>
	            	<span class="glyphicon glyphicon-plus res-treegrid-expander" style="cursor: pointer;" onclick="showInsChild(this,'${entity.id}')"></span>
	            	${entity.name!}
	            	<#else>
	                <font style="padding-left: 16px;">${entity.name!}</font>
	            	</#if>
	            </td>
	    </#if>        
            <td class="left" title="${entity.code}">${entity.code}</td>
                <td class="center" title="${entity.telephone!}">${entity.telephone!}</td>
                <td class="left" title="${entity.email!}">${entity.email!}</td>
                <td style="text-align:center" title="">
				<#if entity.status== 0><div title="启用" class="label label-success">启用</div></#if>
				<#if entity.status== 1><div title="禁用" class="label label-danger">禁用</div></#if>
				</td>
        </tr>
        </#list>
		</tbody>
    </table>
</div>
<#include "department_list_js.html"/>
<#include "../../../common/_page.html"/>