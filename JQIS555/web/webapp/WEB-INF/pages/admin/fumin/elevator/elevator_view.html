<#include "../../../common/_public.html"/>
<div class="bjui-pageContent">
    <form action="${ctx}/admin/system/elevator!save.do" id="pageform" data-isrefsh="true">
        <input class="hidden"  id="types" name="types" value="${types!}">
        <input class="hidden" id="iId" name="id" value="${(entity.id)!}"/>
        <input class="hidden" id="isDel" value="${(entity.isDel)!}"/>
        <div style="margin:15px auto 0;">
            <fieldset>
                <legend>
                    <h3 class="listtitle">电梯信息</h3>
                </legend>
                <table class="table table-condensed"  >
                    <tbody>
                        <tr  >
                            <td class="right" ><span style="color:red">*</span>所在小区：</td>
                            <td class="left" >
                                <input id="entity_name" name="entity.villageName" type="text" data-rule="required;length[~50]"
                                       value="${(entity.villageName)!}"  size="15"  />
                            </td>
                            <td class="right" ><span style="color:red">*</span>所在楼号：</td>
                            <td class="left"  >
                                <input id="entity_floor" name="entity.floor" type="text" data-rule="required"
                                       value="${(entity.floor)!}"   size="15" />
                            </td>
                        </tr>
                        <tr>
                            <td class="right" ><span style="color:red">*</span>电梯号:</td>
                            <td class="left" >
                                <input id="entity_elevatorNumber" name="entity.elevatorNumber" type="text" data-rule="required"
                                       value="${(entity.elevatorNumber)!}"  size="15" />
                            </td>
                            <td class="right" ><span style="color:red">*</span>电梯编号:</td>
                            <td class="left"  >
                                <input id="entity_elevatorCode" name="entity.elevatorCode" type="text" data-rule="required"
                                       value="${(entity.elevatorCode)!}"  size="15" />
                            </td>
                        </tr>

                        <tr>
                            <td class="right">品牌:</td>
                            <td class="left" colspan="1">
                                <input id="entity_brand" name="entity.brand" type="text"
                                       value="${(entity.brand)!}" size="15" />
                            </td>

                            <td class="right" <#if (types == "add")||(types == "edit")> style="visibility: hidden"</#if>>状态:</td>
                            <td class="left"  <#if (types == "add")||(types == "edit")> style="visibility: hidden"</#if>>
                                <select data-clear="" name="entity.status" id="status" data-toggle="selectpicker" data-width="150">
                                    <option value="" >--请选择--</option>
                                    <option value= "0"  <#if (entity.status)! == "0" >selected="selected"</#if>>故障中</option>
                                    <option value= "1"  <#if (entity.status)! == "1" >selected="selected"</#if>>正常</option>
                                </select>
                            </td>

                        </tr>

                        <tr>
                            <td class="right"><span style="color:red">*</span>负责人姓名:</td>
                            <td class="left">
                                <input id="entity_principalorName" name="entity.principalorName" type="text" data-rule="required"
                                       value="${(entity.principalorName)!}" size="15" />
                            </td>

                            <td class="right" ><span style="color:red">*</span>负责人电话:</td>
                            <td class="left"  >
                                <input id="entity_principalorTel" name="entity.principalorTel" type="text" data-rule="required;mobilePhone"
                                       value="${(entity.principalorTel)!}" size="15" />
                            </td>

                        </tr>
                        <tr colspan="4">
                            <td class="right" >备注：</td>
                            <td class="left" colspan="3">
                                <textarea name="entity.reference" type="text" data-rule="length[0~500]" style="width:487px; height:100px">${(entity.reference)!}</textarea>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </form>
</div>
<div class="bjui-pageFooter">
    <ul>
        <li>
            <button type="button" class="btn-close closecutab" data-icon="close">关闭</button>
        </li>
        <li
        <#if types??>
            <#if types == "view">
                hidden="true"
            </#if>
        </#if>>
            <button type="button" class="btn-default" data-icon="save" onclick="elevatorSave('pageform');">保存</button>
        </li>
    </ul>
</div>


<script  language="javascript" type="text/javascript">
    /**
     * 页面加载时初始化方法
     */
    $(document).ready(function () {
        /**新增、编辑、查看页面状态控制**/
        var pageType = $("#types").val();
        if(pageType != null && pageType!="" && pageType!= "undefined" ){
            if (pageType == "view" || pageType == "view1"){
                $("table").find("input").each(function () {
                    $(this).attr("readonly","readonly");
                });
                $("table").find("textArea").each(function () {
                    $(this).attr("readonly","readonly");
                });
                $("table").find("select").each(function () {
                    $(this).attr("disabled","disabled");
                });
                document.getElementById('')
            }else {
                $(".view").html("");
            }
        }
        if ($("#isDel").val() == '1'){
            $(this).alertmsg('warn',"当前数据已被删除，请刷新页面！");
            $(this).dialog('close',$.CurrentDialog);
        }
    });
    /** 电梯信息保存**/
    function elevatorSave(formId) {
        var dataForms = $("#"+formId);
        var $formFlag = dataForms.isValid();
        if($formFlag){
            $.ajax({
                type: "post",
                data: $("#" + formId ).serialize(),
                url: "${ctx}/admin/system/elevatorfm!elevatorSave.do",
                success: function (data) {
                    var dataJson = eval('(' + data + ')');
                    if (dataJson.statusCode == 300){
                        $(this).alertmsg('warn',dataJson.message);
                    }else if(dataJson.statusCode == 200){
                        $(this).alertmsg('correct',dataJson.message);
                        $(this).dialog('close',$.CurrentDialog);
                        dreFreshElevatorList();
                    }
                }
            })
        }

    }


</script>